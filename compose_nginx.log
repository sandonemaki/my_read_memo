Building my_read_memo_web
#1 [internal] load .dockerignore
#1 transferring context: 3.04kB done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 2.34kB done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/ruby:3.0.4-bullseye
#3 DONE 0.6s

#4 [ 1/14] FROM docker.io/library/ruby:3.0.4-bullseye@sha256:261fa5cfc39bfd39811a4f86f350e60aa3fa4e5a1ef68e92123f17e5c149e163
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 16.75kB 0.0s done
#5 DONE 0.0s

#6 [ 2/14] RUN apt-get update   && apt-get install -y --no-install-recommends     build-essential     autoconf     libtool     libde265-dev     libdjvulibre-dev     libfftw3-dev     libghc-bzlib-dev     libgraphviz-dev     libgs-dev     libheif-dev     libmagickcore-dev     libjbig-dev     libjemalloc-dev     libjpeg-dev     libturbojpeg0-dev     liblcms2-dev     liblqr-1-0-dev     liblzma-dev     libopenexr-dev     libpng-dev     libraqm-dev     libtiff-dev     libwebp-dev     libwmf-dev     libzstd-dev     wget     less     && rm -rf /var/lib/apt/lists/*
#6 CACHED

#7 [ 7/14] RUN yarn -v | tee /dev/stderr || echo "yarn install failed"
#7 CACHED

#8 [ 3/14] WORKDIR /usr/src/
#8 CACHED

#9 [12/14] COPY Gemfile Gemfile.lock ./
#9 CACHED

#10 [10/14] COPY package*.json ./
#10 CACHED

#11 [ 5/14] RUN set -x && apt-get update -qq &&     apt-get update && apt-get install -y libpq-dev npm &&     curl -sL https://deb.nodesource.com/setup_16.x | bash - &&     apt-get install -y nodejs &&     curl -L https://install.meilisearch.com | sh &&     rm -rf /var/lib/apt/lists/*
#11 CACHED

#12 [ 8/14] RUN which yarn || echo "yarn is not installed"
#12 CACHED

#13 [ 6/14] RUN npm install -g yarn
#13 CACHED

#14 [ 4/14] RUN wget https://github.com/ImageMagick/ImageMagick/archive/refs/tags/7.1.1-9.tar.gz &&     tar xzf 7.1.1-9.tar.gz &&     cd ImageMagick-7.1.1-9 &&     ./configure       --with-heic=yes       --with-jpeg=yes       --with-png=yes       --with-tiff=yes       --with-openjp2=yes &&     make &&     make install &&     ldconfig /usr/local/lib/ &&     convert -version &&     cd .. &&     rm -rf ImageMagick-7.1.1-9 7.1.1-9.tar.gz
#14 CACHED

#15 [11/14] RUN npm install
#15 CACHED

#16 [ 9/14] WORKDIR /myapp
#16 CACHED

#17 [13/14] RUN bundle config set --local path 'vendor/bundle' && bundle install
#17 CACHED

#18 [14/14] COPY . .
#18 DONE 0.2s

#19 exporting to image
#19 exporting layers 0.1s done
#19 writing image sha256:b850b0d138139b211899bfbec92c9cb0f85ef24b1037dc8e952c4b1ba2c84c75 done
#19 naming to docker.io/library/my_read_memo_my_read_memo_web done
#19 DONE 0.1s
Starting my_read_memo_my_read_memo_db_1 ... 
Starting my_read_memo_my_read_memo_db_1 ... done
Recreating my_read_memo_my_read_memo_web_1 ... 
Recreating my_read_memo_my_read_memo_web_1 ... done
Recreating my_read_memo_my_read_memo_webserver_1 ... 
Recreating my_read_memo_my_read_memo_webserver_1 ... done
Attaching to my_read_memo_my_read_memo_db_1, my_read_memo_my_read_memo_web_1, my_read_memo_my_read_memo_webserver_1
[36mmy_read_memo_db_1         |[0m 
[36mmy_read_memo_db_1         |[0m PostgreSQL Database directory appears to contain a database; Skipping initialization
[36mmy_read_memo_db_1         |[0m 
[36mmy_read_memo_db_1         |[0m 2023-07-24 01:44:25.138 UTC [1] LOG:  starting PostgreSQL 13.11 (Debian 13.11-1.pgdg120+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
[36mmy_read_memo_db_1         |[0m 2023-07-24 01:44:25.141 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
[36mmy_read_memo_db_1         |[0m 2023-07-24 01:44:25.141 UTC [1] LOG:  listening on IPv6 address "::", port 5432
[36mmy_read_memo_db_1         |[0m 2023-07-24 01:44:25.145 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
[36mmy_read_memo_db_1         |[0m 2023-07-24 01:44:25.152 UTC [25] LOG:  database system was interrupted; last known up at 2023-07-23 22:57:01 UTC
[36mmy_read_memo_db_1         |[0m 2023-07-24 01:44:25.767 UTC [25] LOG:  database system was not properly shut down; automatic recovery in progress
[36mmy_read_memo_db_1         |[0m 2023-07-24 01:44:25.771 UTC [25] LOG:  redo starts at 0/16244C8
[36mmy_read_memo_db_1         |[0m 2023-07-24 01:44:25.771 UTC [25] LOG:  invalid record length at 0/16245B0: wanted 24, got 0
[36mmy_read_memo_db_1         |[0m 2023-07-24 01:44:25.771 UTC [25] LOG:  redo done at 0/1624578
[36mmy_read_memo_db_1         |[0m 2023-07-24 01:44:25.789 UTC [1] LOG:  database system is ready to accept connections
[33mmy_read_memo_web_1        |[0m [33mWarning: the running version of Bundler (2.2.33) is older than the version that created the lockfile (2.3.21). We suggest you to upgrade to the version that created the lockfile by running `gem install bundler:2.3.21`.
[33mmy_read_memo_web_1        |[0m [0mUsing rake 13.0.6
[33mmy_read_memo_web_1        |[0m Using concurrent-ruby 1.1.10
[33mmy_read_memo_web_1        |[0m Using i18n 1.12.0
[33mmy_read_memo_web_1        |[0m Using minitest 5.16.3
[33mmy_read_memo_web_1        |[0m Using tzinfo 2.0.5
[33mmy_read_memo_web_1        |[0m Using zeitwerk 2.6.1
[33mmy_read_memo_web_1        |[0m Using activesupport 6.1.7
[33mmy_read_memo_web_1        |[0m Using builder 3.2.4
[33mmy_read_memo_web_1        |[0m Using erubi 1.11.0
[33mmy_read_memo_web_1        |[0m Using racc 1.6.0
[33mmy_read_memo_web_1        |[0m Using nokogiri 1.13.9 (x86_64-linux)
[33mmy_read_memo_web_1        |[0m Using rails-dom-testing 2.0.3
[33mmy_read_memo_web_1        |[0m Using crass 1.0.6
[33mmy_read_memo_web_1        |[0m Using loofah 2.19.0
[33mmy_read_memo_web_1        |[0m Using rails-html-sanitizer 1.4.3
[33mmy_read_memo_web_1        |[0m Using actionview 6.1.7
[33mmy_read_memo_web_1        |[0m Using rack 2.2.4
[33mmy_read_memo_web_1        |[0m Using rack-test 2.0.2
[33mmy_read_memo_web_1        |[0m Using actionpack 6.1.7
[33mmy_read_memo_web_1        |[0m Using nio4r 2.5.8
[33mmy_read_memo_web_1        |[0m Using websocket-extensions 0.1.5
[33mmy_read_memo_web_1        |[0m Using websocket-driver 0.7.5
[33mmy_read_memo_web_1        |[0m Using actioncable 6.1.7
[33mmy_read_memo_web_1        |[0m Using globalid 1.0.0
[33mmy_read_memo_web_1        |[0m Using activejob 6.1.7
[33mmy_read_memo_web_1        |[0m Using activemodel 6.1.7
[33mmy_read_memo_web_1        |[0m Using activerecord 6.1.7
[33mmy_read_memo_web_1        |[0m Using marcel 1.0.2
[33mmy_read_memo_web_1        |[0m Using mini_mime 1.1.2
[33mmy_read_memo_web_1        |[0m Using activestorage 6.1.7
[33mmy_read_memo_web_1        |[0m Using mail 2.7.1
[33mmy_read_memo_web_1        |[0m Using actionmailbox 6.1.7
[33mmy_read_memo_web_1        |[0m Using actionmailer 6.1.7
[33mmy_read_memo_web_1        |[0m Using actiontext 6.1.7
[33mmy_read_memo_web_1        |[0m Using public_suffix 5.0.0
[33mmy_read_memo_web_1        |[0m Using addressable 2.8.1
[33mmy_read_memo_web_1        |[0m Using bindex 0.8.1
[33mmy_read_memo_web_1        |[0m Using msgpack 1.6.0
[33mmy_read_memo_web_1        |[0m Using bootsnap 1.13.0
[33mmy_read_memo_web_1        |[0m Using bundler 2.2.33
[33mmy_read_memo_web_1        |[0m Using byebug 11.1.3
[33mmy_read_memo_web_1        |[0m Using matrix 0.4.2
[33mmy_read_memo_web_1        |[0m Using regexp_parser 2.6.0
[33mmy_read_memo_web_1        |[0m Using xpath 3.2.0
[33mmy_read_memo_web_1        |[0m Using capybara 3.37.1
[33mmy_read_memo_web_1        |[0m Using childprocess 4.1.0
[33mmy_read_memo_web_1        |[0m Using io-console 0.5.11
[33mmy_read_memo_web_1        |[0m Using reline 0.3.1
[33mmy_read_memo_web_1        |[0m Using irb 1.4.2
[33mmy_read_memo_web_1        |[0m Using debug 1.6.3
[33mmy_read_memo_web_1        |[0m Using diff-lcs 1.5.0
[33mmy_read_memo_web_1        |[0m Using dry-cli 1.0.0
[33mmy_read_memo_web_1        |[0m Using ffi 1.15.5
[33mmy_read_memo_web_1        |[0m Using temple 0.10.2
[33mmy_read_memo_web_1        |[0m Using thor 1.2.1
[33mmy_read_memo_web_1        |[0m Using tilt 2.0.11
[33mmy_read_memo_web_1        |[0m Using haml 6.1.1
[33mmy_read_memo_web_1        |[0m Using mime-types-data 3.2022.0105
[33mmy_read_memo_web_1        |[0m Using mime-types 3.4.1
[33mmy_read_memo_web_1        |[0m Using multi_xml 0.6.0
[33mmy_read_memo_web_1        |[0m Using httparty 0.20.0
[33mmy_read_memo_web_1        |[0m Using jbuilder 2.11.5
[33mmy_read_memo_web_1        |[0m Using rb-fsevent 0.11.2
[33mmy_read_memo_web_1        |[0m Using rb-inotify 0.10.1
[33mmy_read_memo_web_1        |[0m Using listen 3.7.1
[33mmy_read_memo_web_1        |[0m Using meilisearch 0.20.0
[33mmy_read_memo_web_1        |[0m Using method_source 1.0.0
[33mmy_read_memo_web_1        |[0m Using pg 1.4.4
[33mmy_read_memo_web_1        |[0m Using prettier_print 1.2.1
[33mmy_read_memo_web_1        |[0m Using puma 5.6.5
[33mmy_read_memo_web_1        |[0m Using rack-mini-profiler 2.3.4
[33mmy_read_memo_web_1        |[0m Using rack-proxy 0.7.4
[33mmy_read_memo_web_1        |[0m Using railties 6.1.7
[33mmy_read_memo_web_1        |[0m Using sprockets 4.1.1
[33mmy_read_memo_web_1        |[0m Using sprockets-rails 3.4.2
[33mmy_read_memo_web_1        |[0m Using rails 6.1.7
[33mmy_read_memo_web_1        |[0m Using rails-i18n 6.0.0
[33mmy_read_memo_web_1        |[0m Using rbs 3.1.0
[33mmy_read_memo_web_1        |[0m Using rexml 3.2.5
[33mmy_read_memo_web_1        |[0m Using rspec-support 3.12.0
[33mmy_read_memo_web_1        |[0m Using rspec-core 3.12.1
[33mmy_read_memo_web_1        |[0m Using rspec-expectations 3.12.2
[33mmy_read_memo_web_1        |[0m Using rspec-mocks 3.12.5
[33mmy_read_memo_web_1        |[0m Using rspec-rails 6.0.1
[33mmy_read_memo_web_1        |[0m Using rubyzip 2.3.2
[33mmy_read_memo_web_1        |[0m Using sassc 2.4.0
[33mmy_read_memo_web_1        |[0m Using sassc-rails 2.1.2
[33mmy_read_memo_web_1        |[0m Using sass-rails 6.0.0
[33mmy_read_memo_web_1        |[0m Using websocket 1.2.9
[33mmy_read_memo_web_1        |[0m Using selenium-webdriver 4.5.0
[33mmy_read_memo_web_1        |[0m Using spring 4.1.0
[33mmy_read_memo_web_1        |[0m Using syntax_tree 6.1.1
[33mmy_read_memo_web_1        |[0m Using syntax_tree-haml 4.0.3
[33mmy_read_memo_web_1        |[0m Using syntax_tree-rbs 1.0.0
[33mmy_read_memo_web_1        |[0m Using turbolinks-source 5.2.0
[33mmy_read_memo_web_1        |[0m Using turbolinks 5.2.1
[33mmy_read_memo_web_1        |[0m Using vite_ruby 3.2.14
[33mmy_read_memo_web_1        |[0m Using vite_rails 3.0.13
[33mmy_read_memo_web_1        |[0m Using web-console 4.2.0
[33mmy_read_memo_web_1        |[0m Using webdrivers 5.2.0
[33mmy_read_memo_web_1        |[0m [32mBundle complete! 25 Gemfile dependencies, 100 gems now installed.[0m
[33mmy_read_memo_web_1        |[0m [32mBundled gems are installed into `./vendor/bundle`[0m
[32mmy_read_memo_webserver_1  |[0m /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
[32mmy_read_memo_webserver_1  |[0m /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
[32mmy_read_memo_webserver_1  |[0m /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
[32mmy_read_memo_webserver_1  |[0m 10-listen-on-ipv6-by-default.sh: info: /etc/nginx/conf.d/default.conf is not a file or does not exist
[32mmy_read_memo_webserver_1  |[0m /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
[32mmy_read_memo_webserver_1  |[0m /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
[32mmy_read_memo_webserver_1  |[0m /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
[32mmy_read_memo_webserver_1  |[0m /docker-entrypoint.sh: Configuration complete; ready for start up
[32mmy_read_memo_webserver_1  |[0m 2023/07/24 01:44:27 [notice] 1#1: using the "epoll" event method
[32mmy_read_memo_webserver_1  |[0m 2023/07/24 01:44:27 [notice] 1#1: nginx/1.25.1
[32mmy_read_memo_webserver_1  |[0m 2023/07/24 01:44:27 [notice] 1#1: built by gcc 12.2.0 (Debian 12.2.0-14) 
[32mmy_read_memo_webserver_1  |[0m 2023/07/24 01:44:27 [notice] 1#1: OS: Linux 5.4.0-125-generic
[32mmy_read_memo_webserver_1  |[0m 2023/07/24 01:44:27 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576
[32mmy_read_memo_webserver_1  |[0m 2023/07/24 01:44:27 [notice] 1#1: start worker processes
[32mmy_read_memo_webserver_1  |[0m 2023/07/24 01:44:27 [notice] 1#1: start worker process 19
[33mmy_read_memo_web_1        |[0m => Booting Puma
[33mmy_read_memo_web_1        |[0m => Rails 6.1.7 application starting in development 
[33mmy_read_memo_web_1        |[0m => Run `bin/rails server --help` for more startup options
[33mmy_read_memo_web_1        |[0m Puma starting in single mode...
[33mmy_read_memo_web_1        |[0m * Puma version: 5.6.5 (ruby 3.0.4-p208) ("Birdie's Version")
[33mmy_read_memo_web_1        |[0m *  Min threads: 5
[33mmy_read_memo_web_1        |[0m *  Max threads: 5
[33mmy_read_memo_web_1        |[0m *  Environment: development
[33mmy_read_memo_web_1        |[0m *          PID: 8
[33mmy_read_memo_web_1        |[0m * Listening on http://0.0.0.0:3000
[33mmy_read_memo_web_1        |[0m Use Ctrl-C to stop
Stopping my_read_memo_my_read_memo_webserver_1   ... 
Stopping my_read_memo_my_read_memo_web_1         ... 
Stopping my_read_memo_my_read_memo_db_1          ... 
Stopping my_read_memo_my_read_memo_webserver_1   ... done
Killing my_read_memo_my_read_memo_web_1          ... 
Killing my_read_memo_my_read_memo_db_1           ... 
Killing my_read_memo_my_read_memo_db_1           ... done
Killing my_read_memo_my_read_memo_web_1          ... done
2
Gracefully stopping... (press Ctrl+C again to force)
